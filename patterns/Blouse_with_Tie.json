{
"pattern": {
  "title": "Blouse with Tie",
  "defaults": [
      "20.5",
      "106",
      "98",
      "106",
      "40",
      "40",
      "54",
      "26",
      "9",
      "18",
      "20.5",
      "50",
      "20.75",
      "17",
      "74",
      "64.75",
      "58.5",
      "25.4",
      "26.75",
      "66.0",
      "19.5",
      "19.75",
      "54.0",
      "52.0",
      "51",
      "65",
      "65",
      "21",
      "23.5",
      "36.5"
  ],
  "measurements": [
      "neck_width",
      "bust",
      "waist",
      "hip",
      "across_back",
      "across_chest",
      "armscye",
      "front_upperbust_height",
      "back_upperbust_height",
      "front_bust_height",
      "bust_points_distance",
      "back_waist_length",
      "back_hip_height",
      "shoulder_length",
      "overarm_length",
      "front_neckheight_balance",
      "back_neckheight_balance",
      "front_shoulderwidth_balance",
      "back_shoulderwidth_balance",
      "back_bust_width",
      "front_waist_length",
      "back_waist_length",
      "front_bust_width",
      "back_bust_width",
      "front_hip_width",
      "back_hip_width",
      "front_hip_height",
      "underarm_length",
      "bicep"
  ],
  "main": [
    {
      "id": "Front A",
      "type": "path",
      "d": [
        ["M", ["pt.a1.x","pt.a1.y"] ],
        ["L", ["pt.a2.x","pt.a2.y"] ],
        ["L", ["pt.a4.x","pt.a4.y"] ],
        ["L", ["pt.a3.x","pt.a3.y"] ],
        ["L", ["pt.a5.x","pt.a5.y"] ],
        ["L", ["pt.a12.x","pt.a12.y"] ],
        ["L", ["pt.a11.x","pt.a11.y"] ],
        ["L", ["pt.a6.x","pt.a6.y"] ],
        ["C", ["pt.a6out.x","pt.a6out.y"], ["pt.a7in.x","pt.a7in.y"], ["pt.a7.x","pt.a7.y"] ],
        ["C", ["pt.a7out.x","pt.a7out.y"], ["pt.a8in.x","pt.a8in.y"], ["pt.a8.x","pt.a8.y"] ],
        ["L", ["pt.a9.x","pt.a9.y"] ],
        ["L", ["pt.a1.x","pt.a1.y"] ],
        ["z"]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"3", "stroke":"#000000", "fill":"none" }
    },
    {
      "id": "Back B",
      "type": "path",
      "d": [
        ["M", ["pt.b1.x","pt.b1.y"] ],
        ["L", ["pt.b5.x","pt.b5.y"] ],
        ["L", ["pt.b15.x","pt.b15.y"] ],
        ["L", ["pt.b17.x","pt.b17.y"] ],
        ["L", ["pt.b19.x","pt.b19.y"] ],
        ["L", ["pt.b18.x","pt.b18.y"] ],
        ["L", ["pt.b16.x","pt.b16.y"] ],
        ["L", ["pt.b6.x","pt.b6.y"] ],
        ["L", ["pt.b7.x","pt.b7.y"] ],
        ["L", ["pt.b8.x","pt.b8.y"] ],
        ["L", ["pt.b9.x","pt.b9.y"] ],
        ["L", ["pt.b10.x","pt.b10.y"] ],
        ["L", ["pt.b13.x","pt.b13.y"] ],
        ["L", ["pt.b14.x","pt.b14.y"] ],
        ["L", ["pt.b12.x","pt.b12.y"] ],
        ["L", ["pt.b11.x","pt.b11.y"] ],
        ["C", ["pt.b11out.x","pt.b11out.y"], ["pt.b1in.x","pt.b1in.y"], ["pt.b1.x","pt.b1.y"] ],
        ["z"]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"3", "stroke":"#000000", "fill":"none" }
    }
  ],
  "construction": [
    {
      "id": "Front Center Line",
      "type": "path",
      "d": [
        ["M", ["pt.a1.x","pt.a1.y"] ],
        ["L", ["pt.a3.x","pt.a3.y"] ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#555555", "fill":"none" }
    }
  ],
  "points": {
    "CM" : "convertUnit(1, 'cm', window.measurementData.clientdata.units)",
    "IN" : "convertUnit(1, 'in', window.measurementData.clientdata.units)",
    "seamAllowance" : "(5/8)*pt.IN",

    "backNeckCenter": { "x": "pt.seamAllowance + 2*pt.CM", "y": "pt.seamAllowance + 2*pt.CM" },
    "backUpperbustCenter": "down(pt.backNeckCenter, 1*meas.back_upperbust_height)",
    "acrossBackCenter": "down(pt.backNeckCenter, 0.5*dist(pt.backNeckCenter, pt.backUpperbustCenter))",
    "backWaistCenter": "down(pt.backNeckCenter, 1*meas.back_waist_length)",
    "backHipCenter": "down(pt.backWaistCenter, 1*meas.back_hip_height)",

    "backNeckSide": "onCircleAtX(pt.backWaistCenter, 1*meas.back_neckheight_balance, pt.backNeckCenter.x + 0.5*meas.neck_width, 'y1 < y2')",
    "temp_backShoulderTip": "intersectCircles(pt.backNeckCenter, 1*meas.back_shoulderwidth_balance, pt.backNeckSide, 1*meas.shoulder_length, 'y1 > y2')",
    "backShoulderTip" : "right(pt.temp_backShoulderTip, 0.75*pt.CM)",
    "acrossBackSide": "right(pt.acrossBackCenter, 0.5*meas.across_back)",
    "backArmscyeCorner": { "x" : "pt.acrossBackSide.x", "y" : "pt.backUpperbustCenter.y" },
    "backUpperbustSide": "right(pt.backUpperbustCenter, 0.5*meas.back_bust_width)",
    "backWaistSide": { "x": "pt.backUpperbustSide.x", "y": "pt.backWaistCenter.y" },
    "backHipSide": { "x": "pt.backHipCenter.x + 0.5*meas.back_hip_width", "y": "pt.backHipCenter.y" },

    "frontNeckCenter": {"x":"2*Math.max(pt.backUpperbustSide.x, pt.backHipSide.x) + 6*pt.CM", "y":"pt.backWaistCenter.y - 1*meas.front_waist_length"},
    "frontUpperbustCenter": "down(pt.frontNeckCenter, 1*meas.front_upperbust_height)",
    "acrossChestCenter": "down(pt.frontNeckCenter, 0.5*dist(pt.frontNeckCenter, pt.frontUpperbustCenter))",
    "frontBustCenter" : "down(pt.frontNeckCenter, 1*meas.front_bust_height)",
    "frontWaistCenter": "down(pt.frontNeckCenter, 1*meas.front_waist_length)",
    "frontHipCenter": { "x" : "pt.frontWaistCenter.x", "y" : "pt.frontWaistCenter.y + 1*meas.front_hip_height" },

    "frontNeckSide": "onCircleAtX(pt.frontWaistCenter, 1*meas.front_neckheight_balance, pt.frontNeckCenter.x - 0.5*meas.neck_width,'y1 < y2')",
    "temp_frontShoulderTip":"intersectCircles(pt.frontNeckCenter,1*meas.front_shoulderwidth_balance,pt.frontNeckSide,1*meas.shoulder_length,'y1 > y2')",
    "frontShoulderTip": "left(pt.temp_frontShoulderTip, 0.75*pt.CM)",
    "acrossChestSide": "left(pt.acrossChestCenter, 0.25*(meas.across_chest) + 0.5*Math.abs(pt.frontNeckCenter.x - pt.frontShoulderTip.x))",
    "frontArmscyeCorner": { "x": "pt.acrossChestSide.x", "y": "pt.frontUpperbustCenter.y" },
    "frontBustPoint" : "left(pt.frontBustCenter,0.5*meas.bust_points_distance)",
    "frontUpperbustSide" : "left(pt.frontUpperbustCenter, 0.5*meas.front_bust_width + 2.5*pt.CM)",
    "frontWaistSide" : { "x" : "pt.frontUpperbustSide.x", "y" : "pt.frontWaistCenter.y" },
    "frontHipSide" : { "x" : "pt.frontHipCenter.x + Math.max(0.5*meas.front_bust_width, 0.5*meas.front_hip_width)", "y" : "pt.frontHipCenter.y" },

    "a1" : "down(pt.frontNeckCenter, 2*pt.CM)",
    "a2" : "right(pt.a1, 1.7*pt.CM)",
    "a3" : "down(pt.frontWaistCenter, 6*pt.CM)",
    "a4" : { "x" : "pt.a2.x", "y" : "pt.a3.y - 1.7*pt.CM" },
    "a5" : { "x" : "pt.frontUpperbustSide.x - 1*pt.CM", "y" : "pt.frontWaistSide.y + 4*pt.CM" },
    "a6" : "copy(pt.frontUpperbustSide)",
    "a7" : { "x" : "pt.acrossChestSide.x + 0.5*pt.CM", "y" : "pt.acrossChestSide.y" },
    "a8" : "copy(pt.frontShoulderTip)",
    "a9" : "copy(pt.frontNeckSide)",
    "a6out" : "right(pt.a6, dist(pt.a6, pt.a7)/1.5)",
    "a8in" : "polar(pt.a8, dist(pt.a7, pt.a8)/3, angleBetween(pt.a9, pt.a8) - radians(90))",
    "a7in" : "polar(pt.a7, dist(pt.a6, pt.a7)/3, angleBetween(pt.a8in, pt.a6out))",
    "a7out" : "polar(pt.a7, dist(pt.a7, pt.a8)/3, angleBetween(pt.a7in, pt.a7))",



    "a10" : { "x": "pt.frontBustPoint.x - 2*pt.CM", "y" : "pt.a6.y" },
    "a11" : "onLineAtLength(pt.a6, pt.a5, 5*pt.CM)",
    "a12" : "onLineAtLength(pt.a6, pt.a5, 7*pt.CM)",
    "a13" : "onBezierAtT(pt.a6, pt.a6out, pt.a7in, pt.a7, 0.66)",
    "a14" : "onBezierAtT(pt.a6, pt.a6out, pt.a7in, pt.a7, 0.5)",

    "b1" : "down(pt.backNeckCenter, 0.5*pt.CM)",
    "b2" : "copy(pt.backWaistCenter)",
    "b3" : "copy(pt.backUpperbustCenter)",
    "b4" : "copy(pt.acrossBackCenter)",
    "b5" : "down(pt.b2, 7*pt.CM)",
    "b6" : "down(pt.backWaistSide, 2*pt.CM)",
    "b7" : "copy(pt.backWaistSide)",
    "b8" : "right(pt.backUpperbustSide, 1*pt.CM)",
    "b9" : "right(pt.acrossBackSide, 1*pt.CM)",
    "temp_angle" : "angleBetween(pt.backNeckSide, pt.backShoulderTip)",
    "temp_b10" : "polar(pt.backShoulderTip, 1.5*pt.CM, pt.temp_angle + radians(90))",
    "b10" : "polar(pt.temp_b10, 1.5*pt.CM, pt.temp_angle)",
    "temp_b11" :"polar(pt.backNeckSide, 1.3*pt.CM, pt.temp_angle - radians(90))",
    "b11" : "polar(pt.temp_b11, 2*pt.CM, pt.temp_angle)",
    "b12" : "onLineAtLength(pt.b11, pt.b10, 1.5*pt.CM)",
    "b13" : "onLineAtLength(pt.b12, pt.b10, 1.5*pt.CM)",
    "temp_b14" : "midPoint(pt.b12, pt.b13)",
    "b14" : "polar(pt.temp_b14, dist(pt.b1, pt.b4)/2, angleBetween(pt.b12, pt.b13) + radians(90))",
    "temp_b15_a" : "midPoint(pt.b5, pt.b6)",
    "temp_b15_b" : "polar(pt.temp_b15_a, 1*pt.CM,angleBetween(pt.b5, pt.b6) - radians(90))",
    "b15" : "left(pt.temp_b15_b, 2.25*pt.CM)",
    "b16" : "right(pt.temp_b15_b, 2.25*pt.CM)",
    "b17" : {"x":"pt.b15.x", "y":"pt.b2.y"},
    "b18" : {"x":"pt.b16.x", "y":"pt.b2.y"},
    "b19" : {"x":"pt.temp_b15_b.x", "y":"pt.b3.y + 2*pt.CM"},

    "b1in" : "right(pt.b1, 2*(dist(pt.b1, pt.b11)/3))",
    "b11out" : "polar(pt.b11, 0.5*(dist(pt.b1, pt.b11)/3), angleBetween(pt.b11, pt.b1in))",
    "b8out" : "left(pt.b8, 2*(dist(pt.b8, pt.b9)/3))",
    "b10in" : "polar(pt.b10, dist(pt.b10, pt.b9)/3, angleBetween(pt.b13, pt.b10) + radians(90))",
    "b9in" : "polar(pt.b9, dist(pt.b8, pt.b9)/3, angleBetween(pt.b10in, pt.b8out))"
  }
}
}
