{
"pattern": {
  "title": "Bodice Block 2",
  "measurements": [

      "neck_diameter",

      "across_back",
      "across_chest",

      "shoulder_length",

      "front_highbust_width",
      "front_highbust_height",
      "back_highbust_width",
      "back_highbust_height",

      "bust",
      "front_bust_width",
      "front_bust_height",
      "back_bust_width",
      "back_bust_height",
      "bust_point_distance",

      "waist",
      "front_waist_width",
      "front_waist_length",
      "back_waist_width",
      "back_waist_length",
      "side_waist_length",

      "front_neck_balance",
      "back_neck_balance",
      "front_shoulder_balance",
      "back_shoulder_balance",
      "front_waist_balance",
      "back_waist_balance"
  ],
  "main": [
    {
      "id": "Front Bodice Block A",
      "type": "path",
      "d": [
        ["M", "pt.frontNeckCenter"  ],
        ["L", "pt.frontWaistCenter", "pt.fWD_leg1", "pt.fWD_point", "pt.fWD_leg2" ],
        ["L", "pt.frontWaistSide", "pt.fBD_leg1", "pt.fBD_point", "pt.fBD_leg2","pt.frontHighbustSide" ],
        ["C", "pt.fHBS_out", "pt.fAS1_in", "pt.frontArmscye1", "pt.fAS1_out", "pt.fST_in", "pt.frontShoulderTip" ],
        ["L", "pt.frontNeckSide" ],
        ["C", "pt.fNS_out", "pt.fNC_in", "pt.frontNeckCenter" ],
        ["z"]
      ],
      "drawattr": {},
      "appearanceattr": {"stroke-width":"2", "stroke":"#111111", "fill":"none"}
    },
    {
      "id": "Back Bodice Block B",
      "type": "path",
      "d": [
        ["M", "pt.backNeckCenter" ],
        ["L", "pt.backWaistCenter","pt.bWD_leg1", "pt.bWD_point", "pt.bWD_leg2", "pt.backWaistSide", "pt.backHighbustSide" ],
        ["C", "pt.bHBS_out", "pt.bAS1_in", "pt.backArmscye1", "pt.bAS1_out", "pt.bST_in", "pt.backShoulderTip" ],
        ["L", "pt.bSD_leg1", "pt.bSD_point", "pt.bSD_leg2", "pt.backNeckSide" ],
        ["C", "pt.bNS_out", "pt.bNC_in", "pt.backNeckCenter" ],
        ["z"]
      ],
      "drawattr": {},
      "appearanceattr": {"stroke-width":"2", "stroke":"#111111", "fill":"none"}
    }
  ],

  "construction": [
      {
      "id": "Front Bodice Block Construction Lines",
      "type": "path",
      "d": [
        ["M", "pt.fBD_leg1" ],
        ["L", "pt.frontApex", "pt.fBD_leg2" ],
        ["M", "pt.fWD_leg1" ],
        ["L", "pt.frontApex", "pt.fWD_leg2" ],
        ["M", "pt.fBD_leg2" ],
        ["L", "pt.t1_fWS", "pt.t1_fWD_leg2", "pt.frontApex", "pt.t1_fWD_leg1", "pt.frontWaistCenter" ],
        ["M", "pt.frontWaistSide" ],
        ["L", "pt.t2_fWD_leg2", "pt.frontApex", "pt.t1_fWD_leg1", "pt.frontWaistCenter" ],
        ["M", "pt.frontWaistSide" ],
        ["L", "pt.t3_fWD_leg2", "pt.frontApex", "pt.t3_fWD_leg1", "pt.frontWaistCenter" ],
        ["M", "pt.fBD_leg1" ],
        ["L", "pt.frontWaistSide", "pt.fWD_leg2", "pt.frontApex", "pt.fWD_leg1", "pt.frontWaistCenter" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#00FF00", "fill":"none" }
    },
      {
      "id": "Front Bodice Block Measurement Lines",
      "type": "path",
      "d": [
        ["M", "pt.frontNeckCore" ],
        ["L", "pt.frontNeckSide" ],
        ["M", "pt.frontNeckCenter" ],
        ["L", "pt.frontWaistCenter" ],
        ["M", "pt.frontAcrossCenter" ],
        ["L", "pt.frontAcrossSide" ],
        ["M", "pt.frontHighbustCenter" ],
        ["L", "pt.frontHighbustSide" ],
        ["M", "pt.frontBustCenter" ],
        ["L", "pt.frontBustSide" ],
        ["M", "pt.t1_fBD_leg2" ],
        ["L", "pt.frontApex" ],
        ["M", "pt.frontNeckSide" ],
        ["L", "pt.frontShoulderTip" ],
        ["M", "pt.frontWaistCenter" ],
        ["L", "pt.t1_fWD_leg1" ],
        ["M", "pt.t1_fWD_leg2" ],
        ["L", "pt.t1_fWS" ],
        ["M", "pt.frontHighbustSide" ],
        ["L", "pt.t1_fWS" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#FF0000", "fill":"none" }
    },
      {
      "id": "Front Bodice Block Balance Lines",
      "type": "path",
      "d": [
        ["M", "pt.frontWaistCenter" ],
        ["L", "pt.frontNeckSide" ],
        ["M", "pt.frontWaistCenter" ],
        ["L", "pt.frontShoulderTip" ],
        ["M", "pt.frontNeckCenter" ],
        ["L", "pt.t1_fWS" ],
        ["M", "pt.p1" ],
        ["L", "pt.frontWaistSide" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#0000FF", "fill":"none" }
    },
    {
      "id": "Back Bodice Block Construction Lines",
      "type": "path",
      "d": [
        ["M", "pt.bSD_leg1" ],
        ["L", "pt.backApex2", "pt.bSD_leg2" ],
        ["M", "pt.bWD_leg1" ],
        ["L", "pt.backApex1", "pt.bWD_leg2" ],
        ["M", "pt.backHighbustSide" ],
        ["L", "pt.t1_bWS", "pt.t1_bWD_leg2", "pt.backApex1", "pt.t1_bWD_leg1", "pt.backWaistCenter" ],
        ["M", "pt.t1_bWS" ],
        ["L", "pt.t2_bWD_leg2", "pt.backApex1", "pt.t2_bWD_leg1", "pt.backWaistCenter" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#00FF00", "fill":"none" }
    },
    {
      "id": "Back Bodice Block Measurement Lines",
      "type": "path",
      "d": [
        ["M", "pt.backNeckCore" ],
        ["L", "pt.backNeckSide" ],
        ["M", "pt.backNeckCenter" ],
        ["L", "pt.backWaistCenter" ],
        ["M", "pt.backAcrossCenter" ],
        ["L", "pt.backAcrossSide" ],
        ["M", "pt.backHighbustCenter" ],
        ["L", "pt.backHighbustSide" ],
        ["M", "pt.backBustCenter" ],
        ["L", "pt.backBustSide" ],
        ["M", "pt.backWaistCenter" ],
        ["L", "pt.t1_bWD_leg1" ],
        ["M", "pt.t1_bWD_leg2" ],
        ["L", "pt.t1_bWS" ],
        ["M", "pt.backNeckSide" ],
        ["L", "pt.t1_bST" ],
        ["M", "pt.backHighbustSide" ],
        ["L", "pt.t1_bWS" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#FF0000", "fill":"none" }
    },
    {
      "id": "Back Bodice Block Balance Lines",
      "type": "path",
      "d": [
        ["M", "pt.backWaistCenter" ],
        ["L", "pt.backNeckSide" ],
        ["M", "pt.backWaistCenter" ],
        ["L", "pt.t1_bST" ],
        ["M", "pt.p4" ],
        ["L", "pt.backShoulderTip" ]
      ],
      "drawattr": {},
      "appearanceattr": { "stroke-width":"1", "stroke":"#0000FF", "fill":"none" }
    }
  ],

  "points": {
    "CM": "convertUnit(1, 'cm', window.measurementData.clientdata.units)",
    "IN": "convertUnit(1, 'in', window.measurementData.clientdata.units)",
    "seamAllowance": "(5/8)*pt.IN",
    "patternOffset": "1*pt.IN",

    "frontNeckCenter": {"x":"3*pt.patternOffset + 1.1*meas.front_bust_width", "y":"pt.patternOffset + 1*meas.neck_diameter"},
    "frontWaistCenter": "down(pt.frontNeckCenter, 1*meas.front_waist_length)",
    "frontHighbustCenter": "down(pt.frontNeckCenter, 1*meas.front_highbust_height)",
    "frontAcrossCenter": "down(pt.frontNeckCenter, 0.6*dist(pt.frontNeckCenter, pt.frontHighbustCenter))",
    "frontBustCenter": "down(pt.frontNeckCenter, 1*meas.front_bust_height)",

    "frontNeckSide": "onCircleAtX(pt.frontWaistCenter, 1*meas.front_neck_balance, pt.frontNeckCenter.x - 0.5*meas.neck_diameter, 'y1 < y2')",
    "frontNeckCore": {"x": "pt.frontNeckCenter.x", "y": "pt.frontNeckSide.y" },
    "frontShoulderTip":"intersectCircles(pt.frontWaistCenter, 1*meas.front_shoulder_balance, pt.frontNeckSide, 1*meas.shoulder_length,'y1 > y2')",
    "frontAcrossSide": "left(pt.frontAcrossCenter, 0.5*meas.across_chest)",
    "frontHighbustSide": "left(pt.frontHighbustCenter, 0.5*meas.front_highbust_width)",
    "frontBustSide": "left(pt.frontBustCenter, 0.5*meas.front_bust_width)",
    "frontApex": "left(pt.frontBustCenter, 0.5*meas.bust_point_distance)",

    "frontArmscye1": {"x": "pt.frontShoulderTip.x + 0.8*Math.abs(pt.frontShoulderTip.x - pt.frontAcrossSide.x)", "y": "pt.frontAcrossSide.y"},
    "frontArmscye2": {"x": "pt.frontShoulderTip.x - 0.25*(pt.frontShoulderTip.x - pt.frontHighbustSide.x)", "y": "pt.frontHighbustCenter.y"},

    "fBD_height": "Math.abs(Math.sqrt(Math.pow(dist(pt.frontApex, pt.frontHighbustSide), 2) - Math.pow(dist(pt.frontApex, pt.frontBustSide),2)))",
    "t1_fBD_leg2": "intersectCircles(pt.frontHighbustSide, pt.fBD_height, pt.frontApex, dist(pt.frontApex, pt.frontBustSide), 'y1 > y2')",
    "t1_fWS": "intersectCircles(pt.frontNeckCenter, 1*meas.front_waist_balance, pt.t1_fBD_leg2, 1*meas.side_waist_length - dist(pt.frontHighbustSide, pt.t1_fBD_leg2), 'y1 > y2')",

    "t1_fWD_leg1": {"x": "pt.frontApex.x", "y": "pt.frontWaistCenter.y"},
    "t1_fWD_leg2": "intersectCircles(pt.frontApex, dist(pt.frontApex, pt.t1_fWD_leg1), pt.t1_fWS, 0.5*meas.front_waist_width - dist(pt.frontWaistCenter, pt.t1_fWD_leg1), 'y1 > y2')",
    "t1_fWD_angle": "angleBetween3pts(pt.t1_fWD_leg1, pt.frontApex, pt.t1_fWD_leg2)",

    "fBD_leg2": "intersectVectorLine(pt.frontApex, radians(180) + 0.25*pt.t1_fWD_angle, pt.frontHighbustSide, pt.t1_fWS)",
    "fBD_leg1": "rotate(pt.fBD_leg2, pt.frontApex, -0.5*pt.t1_fWD_angle)",
    "fBD_point": "polar(pt.frontApex, dist(pt.frontApex, pt.fBD_leg1)/7, angleBetween(pt.frontApex, pt.fBD_leg1) + 0.5*angleBetween3pts(pt.fBD_leg1, pt.frontApex, pt.fBD_leg2))",

    "p2": "intersectLines(pt.frontNeckCenter, pt.t1_fWS, pt.frontApex, pt.fBD_leg2)",
    "p1": "onLineAtX(pt.frontApex, pt.fBD_leg1, pt.p2.x)",

    "frontWaistSide": "intersectCircles(pt.fBD_leg1, dist(pt.fBD_leg2, pt.t1_fWS), pt.p1, dist(pt.p2, pt.t1_fWS), 'y1 > y2')",
    "rotate_waist_angle": "angleBetween3pts(pt.frontWaistSide, pt.frontApex, pt.t1_fWS)",
    "t2_fWD_leg2": "rotate(pt.t1_fWD_leg2, pt.frontApex, -pt.rotate_waist_angle)",
    "t2_fWD_angle": "angleBetween3pts(pt.t1_fWD_leg1, pt.frontApex, pt.t2_fWD_leg2)",

    "t3_fWD_leg1": "intersectVectorLine(pt.frontApex, radians(90) - 0.5*pt.t2_fWD_angle, pt.frontWaistCenter, pt.t1_fWD_leg1)",
    "t3_fWD_leg2": "polar(pt.frontApex, dist(pt.frontApex, pt.t3_fWD_leg1), radians(90) + 0.5*pt.t2_fWD_angle)",
    "t3_fWD_angle": "angleBetween3pts(pt.t3_fWD_leg1, pt.frontApex, pt.t3_fWD_leg2)",

    "fWD_extension_angle": "radians(90) - angleBetween3pts(pt.t3_fWD_leg2, pt.t3_fWD_leg1, pt.frontApex)",
    "fWD_extension_opposite_height": "Math.sin(pt.fWD_extension_angle) * dist(pt.frontWaistCenter, pt.t3_fWD_leg1)",

    "t4_fWD_leg1": "onLineAtLength(pt.t3_fWD_leg1, pt.frontApex, -pt.fWD_extension_opposite_height)",
    "t4_fWD_leg2": "onLineAtLength(pt.t3_fWD_leg2, pt.frontApex, -pt.fWD_extension_opposite_height)",
    "front_waist_delta": "0.5*meas.front_waist_width - (dist(pt.frontWaistCenter, pt.t4_fWD_leg1) + dist(pt.t4_fWD_leg2, pt.frontWaistSide))",

    "fWD_leg1": "onLineAtLength(pt.t4_fWD_leg1, pt.frontWaistCenter, -0.5*pt.front_waist_delta)",
    "fWD_leg2": "onLineAtLength(pt.t4_fWD_leg2, pt.frontWaistSide, -0.5*pt.front_waist_delta)",
    "fWD_point": "down(pt.frontApex, dist(pt.frontApex, pt.fWD_leg1)/7)",

    "front_pattern_waist": {"x": "pt.frontWaistCenter.x - (dist(pt.frontWaistCenter, pt.fWD_leg1) + dist(pt.fWD_leg2, pt.frontWaistSide))", "y": "pt.frontWaistCenter.y + 2*pt.IN"},
    "front_measured_waist": {"x": "pt.frontWaistCenter.x - 0.5*meas.front_waist_width", "y": "pt.frontWaistCenter.y + 3*pt.IN"},

    "fNC_in": "left(pt.frontNeckCenter, 0.6*dist(pt.frontNeckSide, pt.frontNeckCenter))",
    "fNS_out": "down(pt.frontNeckSide, 0.15*dist(pt.frontNeckSide, pt.frontNeckCenter))",
    "fHBS_out": "polar(pt.frontHighbustSide, dist(pt.frontHighbustSide, pt.frontArmscye1)/2, angleBetween(pt.frontHighbustSide, pt.fBD_leg2) - radians(90))",
    "fAS1_in": "polar(pt.frontArmscye1, dist(pt.frontHighbustSide, pt.frontArmscye1)/3, angleBetween(pt.frontShoulderTip, pt.frontArmscye2))",
    "fAS1_out": "polar(pt.frontArmscye1, dist(pt.frontArmscye1, pt.frontShoulderTip)/3, angleBetween(pt.fAS1_in, pt.frontArmscye1))",
    "fST_in": "polar(pt.frontShoulderTip, dist(pt.frontArmscye1, pt.frontShoulderTip)/6,angleBetween(pt.frontNeckSide, pt.frontShoulderTip) - radians(90))",


    "backHighbustCenter": {"x":"pt.t1_fWS.x - 2*pt.seamAllowance - 1*pt.patternOffset - 0.5*meas.front_bust_width", "y":"pt.frontHighbustSide.y"},
    "backNeckCenter": "up(pt.backHighbustCenter, 1*meas.back_highbust_height)",
    "backAcrossCenter": "down(pt.backNeckCenter, 0.66*dist(pt.backNeckCenter, pt.backHighbustCenter))",
    "backWaistCenter": "down(pt.backNeckCenter, 1*meas.back_waist_length)",
    "backBustCenter": "down(pt.backNeckCenter, 1*meas.back_bust_height)",

    "backNeckSide": "onCircleAtX(pt.backWaistCenter, 1*meas.back_neck_balance, pt.backNeckCenter.x + 0.5*meas.neck_diameter, 'y1 < y2')",
    "backNeckCore": {"x": "pt.backNeckCenter.x", "y": "pt.backNeckSide.y" },
    "t1_bST":"intersectCircles(pt.backWaistCenter, 1*meas.back_shoulder_balance, pt.backNeckSide, 1*meas.shoulder_length, 'y1 > y2')",

    "backAcrossSide": "right(pt.backAcrossCenter, 0.5*meas.across_back)",
    "backHighbustSide": "right(pt.backHighbustCenter, 0.5*meas.back_highbust_width)",
    "backBustSide": "right(pt.backBustCenter, 0.5*meas.back_bust_width)",
    "backApex1": {"x": "0.5*(pt.backHighbustCenter.x + pt.backAcrossSide.x)", "y": "pt.backHighbustCenter.y"},

    "back_dart_width": "(1*meas.back_waist_width)/12",
    "t1_bWS": "intersectCircles(pt.backHighbustSide, 1*meas.side_waist_length, pt.backWaistCenter,  0.5*meas.back_waist_width + pt.back_dart_width, 'y1 > y2')",
    "t1_bWD_leg1": {"x": "pt.backApex1.x", "y": "pt.backWaistCenter.y"},
    "t1_bWD_leg2": "intersectCircles(pt.backApex1, dist(pt.backApex1, pt.t1_bWD_leg1), pt.t1_bWS, 0.5*meas.back_waist_width - dist(pt.backWaistCenter, pt.t1_bWD_leg1), 'y1 > y2')",
    "back_dart_angle": "angleBetween3pts(pt.t1_bWD_leg2, pt.backApex1, pt.t1_bWD_leg1)",
    "t2_bWD_leg1": "intersectVectorLine(pt.backApex1, radians(90) + 0.5*(pt.back_dart_angle), pt.backWaistCenter, pt.t1_bWD_leg1)",
    "t2_bWD_leg2": "intersectVectorLine(pt.backApex1, radians(90) - 0.5*(pt.back_dart_angle), pt.backWaistCenter, pt.t1_bWD_leg1)",

    "bWD_extension_angle": "radians(90) - angleBetween3pts(pt.t2_bWD_leg2, pt.t2_bWD_leg1, pt.backApex1)",
    "bWD_extension_opposite_height": "Math.sin(pt.bWD_extension_angle) * dist(pt.backWaistCenter, pt.t2_bWD_leg1)",

    "bWD_leg1": "onLineAtLength(pt.t2_bWD_leg1, pt.backApex1, -pt.bWD_extension_opposite_height)",
    "bWD_leg2": "onLineAtLength(pt.t2_bWD_leg2, pt.backApex1, -pt.bWD_extension_opposite_height)",

    "backWaistSide": "intersectCircles(pt.backHighbustSide, 1*meas.side_waist_length, pt.bWD_leg2, 0.5*meas.back_waist_width - dist(pt.backWaistCenter, pt.bWD_leg1), 'y1 > y2')",

    "bWD_point": "copy(pt.backApex1)",

    "p3": "intersectLines(pt.backWaistCenter, pt.t1_bST, pt.backApex1, pt.bWD_leg1)",
    "p4": "onLineAtLength(pt.backApex1, pt.bWD_leg2, dist(pt.backApex1, pt.p3))",
    "t2_bST": "right(pt.t1_bST, dist(pt.p3, pt.p4))",

    "bSD_mid": "onLineAtLength(pt.backNeckSide, pt.t2_bST, dist(pt.backNeckSide, pt.t2_bST)/6)",
    "backApex2": "polar(pt.bSD_mid, 0.5*dist(pt.backNeckSide, pt.backAcrossCenter), angleBetween(pt.backNeckSide, pt.bSD_mid) + radians(90))",
    "t1_bSD_leg2": "onLineAtLength(pt.bSD_mid, pt.backNeckSide, dist(pt.p3, pt.p4)/2)",
    "t1_bSD_leg1": "onLineAtLength(pt.bSD_mid, pt.t2_bST, dist(pt.p3, pt.p4)/2)",
    "bSD_point": "polar(pt.backApex2, dist(pt.backApex2, pt.bSD_mid)/5, angleBetween(pt.backApex2, pt.bSD_mid))",

    "bSD_extension_theta": "radians(90) - angleBetween3pts(pt.t1_bSD_leg1, pt.t1_bSD_leg2, pt.backApex2)",
    "bSD_extension_opposite": "Math.sin(pt.bSD_extension_theta) * dist(pt.backNeckSide, pt.t1_bSD_leg2)",
    "bSD_leg2": "onLineAtLength(pt.t1_bSD_leg2, pt.backApex2, -pt.bSD_extension_opposite)",
    "bSD_leg1": "onLineAtLength(pt.t1_bSD_leg1, pt.backApex2, -pt.bSD_extension_opposite)",
    "backShoulderTip": "intersectLineCircle(pt.t1_bSD_leg1, pt.t2_bST, pt.bSD_leg1, dist(pt.t1_bSD_leg1, pt.t2_bST), 'x1 > x2')",

    "backArmscye1": {"x": "pt.backShoulderTip.x - 0.6*Math.abs(pt.backShoulderTip.x - pt.backAcrossSide.x)", "y": "pt.backAcrossSide.y"},
    "backArmscye2": {"x": "pt.backAcrossSide.x + 0.5*Math.abs(pt.backAcrossSide.x - pt.backHighbustSide.x)", "y": "pt.backHighbustSide.y"},

    "back_pattern_waist": {"x": "pt.backWaistCenter.x + dist(pt.backWaistCenter, pt.bWD_leg1) + dist(pt.bWD_leg2, pt.backWaistSide)", "y": "pt.backWaistCenter.y + 2*pt.IN"},
    "back_measured_waist": {"x": "pt.backWaistCenter.x + 0.5*meas.back_waist_width", "y": "pt.backWaistCenter.y + 3*pt.IN"},

    "bNC_in": "right(pt.backNeckCenter, 0.6*dist(pt.backNeckSide, pt.backNeckCenter))",
    "bNS_out": "polar(pt.backNeckSide, 0.15*dist(pt.backNeckSide, pt.backNeckCenter), angleBetween(pt.backNeckSide, pt.bNC_in))",
    "bHBS_out": "polar(pt.backHighbustSide, dist(pt.backHighbustSide, pt.backArmscye1)/2, angleBetween(pt.backHighbustSide, pt.backWaistSide) + radians(90))",
    "bAS1_in": "polar(pt.backArmscye1, dist(pt.backHighbustSide, pt.backArmscye1)/3, angleBetween(pt.backShoulderTip, pt.backArmscye2))",
    "bAS1_out": "polar(pt.backArmscye1, dist(pt.backArmscye1, pt.backShoulderTip)/3, angleBetween(pt.bAS1_in, pt.backArmscye1))",
    "bST_in": "polar(pt.backShoulderTip, dist(pt.backArmscye1, pt.backShoulderTip)/6, angleBetween(pt.backNeckSide, pt.backShoulderTip) + radians(90))"

  }

}
}


